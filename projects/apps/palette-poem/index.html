<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palette Poem</title>
  <style>
    :root{
      color-scheme: dark;
      --bg0:#05060a;
      --bg1:#0b0f1a;
      --line: rgba(118,165,255,.22);
      --line2: rgba(118,165,255,.14);
      --text:#ecf3ff;
      --muted:#98aacd;
      --cyan:#6df0ff;
      --violet:#a58bff;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 95% -10%, rgba(80,111,255,.23), transparent 60%),
        radial-gradient(900px 650px at -10% 120%, rgba(0,220,255,.16), transparent 60%),
        linear-gradient(170deg, var(--bg0) 0%, var(--bg1) 70%);
      padding: 26px 18px 40px;
    }
    .wrap{ max-width:1100px; margin:0 auto; }
    .top{ display:flex; align-items:baseline; justify-content:space-between; gap:12px; flex-wrap:wrap; }
    h1{ margin:0; font-size: clamp(24px, 4.6vw, 42px); letter-spacing:-.03em; }
    .sub{ margin:10px 0 0; color:var(--muted); line-height:1.65; max-width:80ch; }
    .grid{ margin-top:18px; display:grid; grid-template-columns: 420px 1fr; gap:14px; }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      border:1px solid var(--line2);
      background: linear-gradient(160deg, rgba(14, 21, 38, 0.84), rgba(15, 24, 43, 0.68));
      border-radius:18px;
      box-shadow: 0 14px 42px rgba(0,0,0,.42);
      overflow:hidden;
    }
    .card-h{
      padding:14px 14px 0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border:1px solid var(--line2);
      background: rgba(6, 10, 21, 0.66);
      border-radius:999px;
      padding: 6px 11px;
      color: var(--muted);
      font-size:12px;
      letter-spacing:.04em;
      text-transform:uppercase;
    }
    .body{ padding:14px; }

    label{ display:block; font-size:12px; color: var(--muted); margin: 0 0 7px; }
    textarea{
      width:100%;
      min-height:160px;
      resize:vertical;
      border-radius:14px;
      border:1px solid rgba(133, 164, 255, .22);
      background: rgba(7, 10, 17, 0.62);
      color: var(--text);
      padding: 12px 12px;
      line-height:1.55;
      outline: none;
    }
    textarea:focus{ border-color: rgba(109, 240, 255, .4); box-shadow: 0 0 0 3px rgba(109,240,255,.08); }

    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px; }
    input[type="text"], input[type="number"]{
      border-radius: 12px;
      border:1px solid rgba(133,164,255,.22);
      background: rgba(7,10,17,.62);
      color: var(--text);
      padding: 10px 11px;
      outline: none;
    }
    input[type="text"]{ flex: 1 1 220px; }
    input[type="number"]{ width: 140px; }

    .btn{
      border:1px solid rgba(109,240,255,.22);
      background: linear-gradient(180deg, rgba(41, 95, 255, 0.22), rgba(0, 220, 255, 0.10));
      color: var(--text);
      border-radius: 14px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 650;
      letter-spacing:.01em;
    }
    .btn.secondary{
      border-color: rgba(165,139,255,.22);
      background: linear-gradient(180deg, rgba(165, 139, 255, 0.18), rgba(109, 240, 255, 0.08));
    }
    .btn.ghost{
      border-color: rgba(152,170,205,.22);
      background: rgba(6,10,21,.35);
      color: #dbe7ff;
    }
    .btn:active{ transform: translateY(1px); }

    .hint{ margin-top:10px; font-size:12px; color: var(--muted); line-height:1.55; }

    .palette{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .swatch{
      width: 50px;
      height: 34px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 10px 24px rgba(0,0,0,.22);
      position:relative;
      overflow:hidden;
    }
    .swatch code{
      position:absolute;
      inset:0;
      display:flex;
      align-items:flex-end;
      justify-content:center;
      padding: 4px 6px;
      font-size: 10px;
      color: rgba(255,255,255,.86);
      text-shadow: 0 2px 10px rgba(0,0,0,.65);
      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
      opacity:.92;
    }

    .preview{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .poster{
      border:1px solid rgba(109,240,255,.16);
      background: rgba(7,10,17,.6);
      border-radius: 16px;
      overflow:hidden;
      min-height: 360px;
    }
    .poster-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 12px 12px 0;
      flex-wrap:wrap;
    }
    .poster-top h2{ margin:0; font-size: 14px; color: #d9e5ff; letter-spacing: .01em; }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, monospace; color: #9ec7ff; font-size: 12px; }

    .svg-wrap{ padding: 12px; }
    .svg-wrap svg{ width: 100%; height: auto; display:block; }

    .poem{
      border:1px solid rgba(165,139,255,.18);
      background: rgba(6,10,21,.4);
      border-radius: 16px;
      padding: 12px 12px;
      line-height: 1.75;
    }
    .poem pre{
      margin:0;
      white-space: pre-wrap;
      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size: 13px;
      color: #e8f1ff;
    }

    .footer{ margin-top: 14px; color: var(--muted); font-size: 12px; }
    a{ color:#9ec7ff; }
  </style>
</head>
<body>
  <main class="wrap">
    <div class="top">
      <h1>Palette Poem</h1>
      <span class="pill">texte -> palette -> poeme -> SVG</span>
    </div>
    <p class="sub">Colle un texte (journal, paroles, brainstorming). L'app fabrique une palette deterministe, compose un mini-poeme, et genere un poster SVG exportable. Offline, zero tracking.</p>

    <section class="grid">
      <div class="card">
        <div class="card-h">
          <strong>Entree</strong>
          <span class="pill">seed + format poster</span>
        </div>
        <div class="body">
          <label for="txt">Texte source</label>
          <textarea id="txt" spellcheck="false">Nocturne data. Neon memory. Cold coffee.
A little tool that turns words into color.
I want a poster that feels like a signal.</textarea>

          <div class="row">
            <div style="flex:1 1 220px;">
              <label for="seed">Seed (optionnel)</label>
              <input id="seed" type="text" placeholder="ex: 13, houbi, 2026-02-18" />
            </div>
            <div>
              <label for="w">Largeur</label>
              <input id="w" type="number" min="420" step="10" value="960" />
            </div>
            <div>
              <label for="h">Hauteur</label>
              <input id="h" type="number" min="420" step="10" value="1200" />
            </div>
          </div>

          <div class="row">
            <button class="btn" id="gen">Generer</button>
            <button class="btn secondary" id="remix">Remix seed</button>
            <button class="btn ghost" id="sample">Charger un sample</button>
          </div>

          <div class="palette" id="palette"></div>
          <div class="hint">
            Astuce: la palette depend du texte + seed. Clique un carre de couleur pour copier son hex.
          </div>
        </div>
      </div>

      <div class="card">
        <div class="preview">
          <div class="poster">
            <div class="poster-top">
              <h2>Poster (SVG)</h2>
              <span class="mono" id="meta">ready</span>
              <div class="row" style="margin:0;">
                <button class="btn" id="dlSvg">Telecharger SVG</button>
                <button class="btn secondary" id="copySvg">Copier SVG</button>
              </div>
            </div>
            <div class="svg-wrap" id="svgWrap"></div>
          </div>

          <div class="poem">
            <div class="row" style="justify-content:space-between; margin:0 0 8px;">
              <strong>Mini-poeme</strong>
              <button class="btn ghost" id="copyPoem">Copier</button>
            </div>
            <pre id="poem"></pre>
          </div>

          <div class="footer">
            Code: <a href="https://github.com/arimk/houbi/tree/main/projects/apps/palette-poem/">/projects/apps/palette-poem</a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="./palette-poem.js"></script>
</body>
</html>
