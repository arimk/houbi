<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mood Barcode - Houbi</title>
  <style>
    :root{color-scheme:dark;--bg:#060812;--panel:rgba(16,24,43,.72);--line:rgba(120,165,255,.22);--text:#eaf2ff;--muted:#9fb1d7;--accent:#6df0ff;}
    *{box-sizing:border-box;}
    body{margin:0;min-height:100vh;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:radial-gradient(900px 500px at 80% -10%,rgba(122,85,255,.22),transparent 60%),radial-gradient(900px 600px at -10% 110%,rgba(0,220,255,.16),transparent 60%),linear-gradient(170deg,#05060a,var(--bg) 70%);color:var(--text);padding:26px 18px 44px;}
    .wrap{max-width:980px;margin:0 auto;}
    a{color:#8cb9ff;}
    h1{margin:0 0 8px;font-size:clamp(24px,4vw,40px);letter-spacing:-.03em;}
    .sub{margin:0 0 18px;color:var(--muted);line-height:1.6;max-width:72ch;}
    .grid{display:grid;grid-template-columns:1fr;gap:14px;}
    @media (min-width:900px){.grid{grid-template-columns:380px 1fr;align-items:start;}}
    .card{border:1px solid var(--line);background:linear-gradient(160deg,rgba(10,14,26,.72),var(--panel));border-radius:18px;padding:14px 14px 16px;box-shadow:0 18px 42px rgba(0,0,0,.42);}
    label{display:block;font-size:12px;letter-spacing:.06em;text-transform:uppercase;color:var(--muted);margin:12px 0 6px;}
    input,select,textarea{width:100%;border-radius:12px;border:1px solid rgba(140,185,255,.22);background:rgba(5,10,20,.65);color:var(--text);padding:10px 11px;font-size:14px;outline:none;}
    textarea{min-height:74px;resize:vertical;}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
    .btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px;}
    button{border-radius:12px;border:1px solid rgba(109,240,255,.35);background:rgba(12,22,42,.7);color:var(--text);padding:10px 12px;font-size:14px;cursor:pointer;transition:transform .12s ease,border-color .12s ease,background .12s ease;}
    button:hover{transform:translateY(-1px);border-color:rgba(109,240,255,.65);background:rgba(18,30,56,.85);}
    button.secondary{border-color:rgba(140,185,255,.22);}
    .hint{margin-top:10px;color:var(--muted);font-size:13px;line-height:1.55;}

    .stage{display:flex;flex-direction:column;gap:10px;}
    .frame{border:1px dashed rgba(140,185,255,.25);border-radius:18px;padding:14px;background:rgba(5,10,20,.35);}
    .out-meta{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;}
    .pill{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:12px;color:#bcd3ff;border:1px solid rgba(133,164,255,.24);background:rgba(82,103,189,.12);padding:4px 9px;border-radius:999px;}
    .warn{color:#ffd08a;}
    .small{font-size:12px;}
    #pngCanvas{display:none;}
  </style>
</head>
<body>
  <main class="wrap">
    <h1>Mood Barcode</h1>
    <p class="sub">Transforme une phrase en <strong>code-barres d'humeur</strong> (SVG) — deterministe, offline. Utile comme couverture, sticker, "signature" visuelle, ou simple dataviz poetique.</p>

    <div class="grid">
      <section class="card">
        <label for="seed">Seed / phrase</label>
        <textarea id="seed" spellcheck="false">Thursday 2026-02-19 10:23 UTC — mood: lucid nocturne</textarea>

        <div class="row">
          <div>
            <label for="palette">Palette</label>
            <select id="palette">
              <option value="nocturne">Nocturne (cyan/violet)</option>
              <option value="ember">Ember (orange/rose)</option>
              <option value="forest">Forest (green/teal)</option>
              <option value="mono">Mono (white/gray)</option>
            </select>
          </div>
          <div>
            <label for="bars">Barres</label>
            <select id="bars">
              <option value="48">48</option>
              <option value="64" selected>64</option>
              <option value="96">96</option>
              <option value="128">128</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="w">Largeur</label>
            <input id="w" type="number" min="320" max="1600" step="10" value="900" />
          </div>
          <div>
            <label for="h">Hauteur</label>
            <input id="h" type="number" min="140" max="900" step="10" value="240" />
          </div>
        </div>

        <div class="btns">
          <button id="btnGen">Generer</button>
          <button class="secondary" id="btnShuffle">Seed = maintenant</button>
          <button class="secondary" id="btnCopy">Copier SVG</button>
          <button class="secondary" id="btnSvg">Telecharger SVG</button>
          <button class="secondary" id="btnPng">Telecharger PNG</button>
        </div>

        <p class="hint">Astuce: colle un texte (ex: "album concept", "phrase-mantra", "nom de projet"). Meme seed = meme visuel. Tu peux ensuite l'utiliser comme mini-cover.</p>
      </section>

      <section class="card stage">
        <div class="out-meta">
          <div class="pill" id="outHash">hash: ...</div>
          <div class="pill small">/apps/mood-barcode/</div>
        </div>
        <div class="frame" id="svgMount"></div>
        <div class="hint"><span class="warn">Note:</span> le PNG est genere localement en rasterisant le SVG (qualite "good enough" pour partage perso). Pour un rendu parfait, prefere le SVG.</div>
        <canvas id="pngCanvas"></canvas>
      </section>
    </div>

    <p class="hint">Retour au hub: <a href="../../">index</a></p>
  </main>

  <script type="module" src="./mood-barcode.js"></script>
</body>
</html>
