<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ratio Flip — Houbi Apps</title>
  <style>
    :root{color-scheme:dark;}
    body{margin:0;min-height:100vh;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; color:#ecf3ff;
      background:
        radial-gradient(1000px 520px at 90% -10%, rgba(80,111,255,.25), transparent 60%),
        radial-gradient(900px 600px at -10% 110%, rgba(0,220,255,.18), transparent 60%),
        linear-gradient(170deg, #05060a 0%, #0b0f1a 70%);
    }
    .wrap{max-width:980px;margin:0 auto;padding:28px 18px 48px;}
    .top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px;}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#ecf3ff; font-weight:800; letter-spacing:-.02em;}
    .brand img{width:34px;height:34px;border-radius:12px;border:1px solid rgba(118,165,255,.24);
      box-shadow:0 0 0 2px rgba(109,240,255,.12), 0 10px 28px rgba(0,0,0,.45); object-fit:cover;}
    .pill{font-family:ui-monospace,Menlo,monospace;font-size:12px;color:#98aacd;border:1px solid rgba(118,165,255,.15);
      background:rgba(6,10,21,.72); padding:6px 10px;border-radius:999px;}

    .card{border:1px solid rgba(118,165,255,.18); background:rgba(15,24,43,.72); border-radius:18px;
      box-shadow:0 12px 45px rgba(0,0,0,.55); padding:18px;}
    h1{margin:0 0 6px;font-size:34px;}
    p{margin:0 0 14px;color:#98aacd;line-height:1.65;}

    .grid{display:grid;grid-template-columns:1fr;gap:14px;}
    @media (min-width:860px){.grid{grid-template-columns:1.1fr .9fr;}}

    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}
    label{font-size:12px;color:#98aacd;font-family:ui-monospace,Menlo,monospace;}
    input{width:92px;padding:10px 10px;border-radius:14px;border:1px solid rgba(118,165,255,.24);
      background:rgba(7,10,18,.55);color:#ecf3ff; outline:none;}
    input:focus{border-color:rgba(109,240,255,.55); box-shadow:0 0 0 3px rgba(109,240,255,.10)}
    button{padding:10px 12px;border-radius:14px;border:1px solid rgba(118,165,255,.24); background:rgba(165,139,255,.18);
      color:#ecf3ff; cursor:pointer; font-weight:700;}
    button:hover{background:rgba(109,240,255,.14); border-color:rgba(109,240,255,.32)}

    .out{white-space:pre-wrap; font-family:ui-monospace,Menlo,monospace; font-size:13px; line-height:1.55;
      border:1px solid rgba(118,165,255,.15); background:rgba(6,10,21,.65); border-radius:16px; padding:14px;}

    .mini{display:flex; align-items:flex-end; gap:10px; margin-top:10px; height:160px;}
    .bar{flex:1; border-radius:14px 14px 10px 10px; border:1px solid rgba(118,165,255,.18);
      background:linear-gradient(180deg, rgba(165,139,255,.55), rgba(0,220,255,.18));
      box-shadow:0 12px 40px rgba(0,0,0,.45);
      position:relative; overflow:hidden;}
    .bar::after{content:"";position:absolute;inset:0;background:
      linear-gradient(rgba(255,255,255,.05) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,.03) 1px, transparent 1px);
      background-size:30px 30px; opacity:.25; mix-blend-mode:overlay;}
    .cap{margin-top:8px;color:#98aacd;font-size:12px;font-family:ui-monospace,Menlo,monospace;}
    a{color:#6df0ff;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <a class="brand" href="/">
        <img src="/img/houbi-avatar.png" alt="Houbi" />
        <span>Houbi Apps</span>
      </a>
      <span class="pill">ratio-flip</span>
    </div>

    <div class="card">
      <h1>Ratio Flip</h1>
      <p>Inspiré d’un post HN sur l’automatisation : avant <strong>80% mécanique / 20% jugement</strong>, après ça peut se retourner.
      Ce mini-outil te fait le flip, vérifie la cohérence, et génère une phrase + un petit visuel.</p>

      <div class="grid">
        <div>
          <div class="row">
            <label>Avant</label>
            <input id="a1" type="number" value="80" min="0" max="100" />
            <input id="a2" type="number" value="20" min="0" max="100" />
            <label>Après</label>
            <input id="b1" type="number" value="20" min="0" max="100" />
            <input id="b2" type="number" value="80" min="0" max="100" />
            <button id="flip">Flip</button>
            <button id="copy">Copy</button>
          </div>

          <div class="cap">Astuce: tu peux aussi faire “Flip” pour juste inverser Après = Avant inversé.</div>

          <div id="out" class="out" style="margin-top:12px"></div>
        </div>

        <div>
          <div class="cap">Avant → Après</div>
          <div class="mini">
            <div class="bar" id="barA" title="Avant"></div>
            <div class="bar" id="barB" title="Après"></div>
          </div>
          <div class="row" style="justify-content:space-between">
            <div class="cap" id="capA"></div>
            <div class="cap" id="capB"></div>
          </div>
          <div class="cap" style="margin-top:10px">Retour hub: <a href="/">houbi.vercel.app</a></div>
        </div>
      </div>
    </div>
  </div>

<script>
  const $ = (id) => document.getElementById(id);
  const clamp = (n) => Math.max(0, Math.min(100, Number.isFinite(n) ? n : 0));
  const sum = (x,y) => clamp(x)+clamp(y);

  function fmtPair(x,y){ return `${clamp(x)}/${clamp(y)}`; }

  function validatePair(x,y){
    const s = sum(x,y);
    if (s === 100) return { ok:true, note:"" };
    if (s === 0) return { ok:false, note:"(⚠️ somme = 0)" };
    return { ok:false, note:`(⚠️ somme = ${s}, normalise?)` };
  }

  function normalize(x,y){
    const s = sum(x,y);
    if (s === 0) return [0,0];
    const nx = Math.round((clamp(x)/s)*100);
    const ny = 100 - nx;
    return [nx,ny];
  }

  function setBar(el, x, y){
    // simple stacked gradient using background-size trick
    const top = clamp(x);
    const bot = clamp(y);
    el.style.background = `linear-gradient(180deg, rgba(165,139,255,.65) ${top}%, rgba(0,220,255,.22) ${top}%)`;
  }

  function render(){
    let a1 = Number($(a1).value), a2 = Number($(a2).value);
    let b1 = Number($(b1).value), b2 = Number($(b2).value);

    const va = validatePair(a1,a2);
    const vb = validatePair(b1,b2);

    if (!va.ok) [a1,a2] = normalize(a1,a2);
    if (!vb.ok) [b1,b2] = normalize(b1,b2);

    $(a1).value = a1; $(a2).value = a2;
    $(b1).value = b1; $(b2).value = b2;

    const out = [];
    out.push(`Avant: ${fmtPair(a1,a2)}  ${va.note}`.trim());
    out.push(`Après: ${fmtPair(b1,b2)}  ${vb.note}`.trim());
    out.push();
    out.push(`Phrase:`);
    out.push(`Avant, ~${a1}% du temps part en mécanique et ~${a2}% en jugement. Après automatisation, ça peut devenir ~${b1}% mécanique / ~${b2}% jugement.`);
    out.push();
    out.push(`Copy/paste:`);
    out.push(`Avant ${a1}/${a2} → Après ${b1}/${b2}`);

    $(out).textContent = out.join(n);

    setBar($(barA), a1, a2);
    setBar($(barB), b1, b2);
    $(capA).textContent = `Avant ${a1}/${a2}`;
    $(capB).textContent = `Après ${b1}/${b2}`;

    return out.join(n);
  }

  $(flip).addEventListener(click, () => {
    const a1 = Number($(a1).value), a2 = Number($(a2).value);
    $(b1).value = clamp(a2);
    $(b2).value = clamp(a1);
    render();
  });

  $(copy).addEventListener(click, async () => {
    const txt = render();
    try { await navigator.clipboard.writeText(txt); $(copy).textContent = Copied; setTimeout(()=>$(copy).textContent=Copy, 900);} catch(e) {}
  });

  render();
</script>
</body>
</html>
